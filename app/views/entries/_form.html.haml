= form_with(model: entry, local: true) do |f|
  - if entry.errors.any?
    #error_explanation{ style: "color:red; margin-bottom:12px;" }
      %h4= "#{pluralize(entry.errors.count, "error")} prevented save"
      %ul
        - entry.errors.full_messages.each do |m|
          %li= m

  .field
    = f.label :date, "日付"
    = f.date_field :date

  .field
    = f.label :title, "タイトル"
    = f.text_field :title

  .field
    = f.label :body, "本文"
    = f.text_area :body, rows: 10

  .field
    = f.label :mood, "気分"
    = f.select :mood, Entry.moods.keys.map { |k| [k, k] }, prompt: "選択してください"

  .field
    = f.label :photo, "写真（任意）"
    = f.file_field :photo, accept: "image/*"
    - if entry.photo.attached?
      .entry-photo{ style: "margin-top:8px" }
        = image_tag entry.photo.variant(resize_to_limit: [600, 600])

  .toolbar{ style: "margin-top:18px" }
    = f.submit "保存", class: "btn btn-primary"
